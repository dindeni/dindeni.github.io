(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={main:"main_main__1rH-M","main__weather-now":"main_main__weather-now__24K4q","main__day-week":"main_main__day-week__114-y",main__temperature:"main_main__temperature__2yMnz","main__weather-now-svg":"main_main__weather-now-svg__F0DIG","main__weather-now-header-container":"main_main__weather-now-header-container__3Nsk5","main__weather-now-wind":"main_main__weather-now-wind__1yw2x","main__weather-now-svg---wind":"main_main__weather-now-svg---wind__2TkPx","main__weather-now-city":"main_main__weather-now-city__2C75A","main__weather-now-humidity":"main_main__weather-now-humidity__KE3fJ","main__weather-now-svg---humidity":"main_main__weather-now-svg---humidity__l15tB","main__weather-now-day":"main_main__weather-now-day__3y8oA"}},10:function(e,t,a){e.exports={container:"footer_container__p56om",design:"footer_design__2fc71",link:"footer_link__4tYEd",author:"footer_author__3yb6s"}},16:function(e,t,a){e.exports={body:"App_body__2JlO3",footer:"App_footer__3wnWY"}},2:function(e,t,a){e.exports={forecast:"forecast_forecast__22um3",weather:"forecast_weather__2Hk42","day-week":"forecast_day-week__30vbg",temperature:"forecast_temperature__1vTeq","weather-container":"forecast_weather-container__2XZNa","weather-svg":"forecast_weather-svg__3KuKW","weather-wind":"forecast_weather-wind__b-vpR","weather-svg---wind":"forecast_weather-svg---wind__2qtRe","weather-humidity":"forecast_weather-humidity__19_TZ","weather-svg---humidity":"forecast_weather-svg---humidity__2EHh2",loader:"forecast_loader__1kfwO","lds-dual-ring":"forecast_lds-dual-ring__c5SSb"}},23:function(e,t,a){e.exports={header__logo:"header_header__logo__11A1M"}},26:function(e,t,a){e.exports=a(41)},4:function(e,t,a){e.exports=a.p+"static/media/sprite.symbol.08787329.svg"},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o),i=a(11),s=a(12),l=a(14),m=a(13),u=a(15),h=a(16),_=a.n(h),d=a(23),w=a.n(d),p=a(3),f=a(5),g=a.n(f),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).search=function(e){e.preventDefault(),new Promise(function(t){t(a.props.search(e.target.value))}).then(function(){clearTimeout(a.deb),a.deb=setTimeout(function(){a.props.searchValue?a.props.getCities(a.props.searchValue):a.props.getCitiesNull()},500)}).catch(function(e){console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getGeolocation(),""!==this.props.geolocation&&console.log(this,this.props.geolocation.city),this.init=function(){e.myMap=new window.ymaps.Map("map",{center:[e.coordX,e.coordY],zoom:7,controls:["geolocationControl"]})}}},{key:"componentDidUpdate",value:function(e,t){this.props.searchCity!==e.searchCity&&0!==this.props.searchCity.length&&(this.coordX=this.props.searchCity[0].GeoObject.Point.pos.slice(9),this.coordY=this.props.searchCity[0].GeoObject.Point.pos.slice(0,9),window.ymaps.ready(this.init),this.myMap&&this.myMap.destroy()),this.props.listWeather,e.listWeather}},{key:"submit",value:function(e){e.preventDefault()}},{key:"onclickList",value:function(e){this.props.search("".concat(e.GeoObject.name,", ").concat(e.GeoObject.description)),this.props.getCitiesNull(),this.props.getWeatherNow(e.GeoObject.name,e.GeoObject.description,"now"),this.props.getWeatherForecast(e.GeoObject.name,e.GeoObject.description)}},{key:"render",value:function(){var e=this;""===this.props.listWeather&&""!==this.props.geolocation&&(this.props.getWeatherNow(this.props.geolocation.city,this.props.geolocation.country,"now"),this.props.getWeatherForecast(this.props.geolocation.city,this.props.geolocation.country));var t=null;t=""!==this.props.geolocation?"".concat(this.props.geolocation.city,", ").concat(this.props.geolocation.country):"search";var a=null;return a=""!==this.props.searchCity&&0!==this.props.searchCity.length?r.a.createElement("div",null,r.a.createElement("ul",{className:g.a["header__form-ul"]},this.props.searchCity.map(function(t,a){return r.a.createElement("li",{key:a,className:g.a["header__form-list"],onClick:function(){return e.onclickList(t)}},"".concat(t.GeoObject.name,", ").concat(t.GeoObject.description))})),r.a.createElement("div",{className:g.a["header__form-map"],id:"map"})):0===this.props.searchCity.length&&""!==this.props.searchCity?r.a.createElement("div",null,r.a.createElement("ul",{className:g.a["header__form-ul"]},r.a.createElement("li",{className:g.a["header__form-list"]},"not found"))):null,r.a.createElement("div",null,r.a.createElement("form",{className:g.a["header__form-search"],onSubmit:this.submit},r.a.createElement("input",{className:g.a["header__form-input"],onChange:this.search,value:this.props.searchValue,placeholder:t,type:"text"})),a)}}]),t}(n.Component),v=Object(p.b)(function(e){return{searchValue:e.reducer.searchValue,geolocation:e.reducer.geolocation,listWeather:e.reducer.listWeather,searchCity:e.reducer.searchCity,listForecast:e.reducer.listForecast}},function(e){return{search:function(t){return e(function(e){return function(t){t({type:"SEARCH_VALUE",searchValue:e})}}(t))},getGeolocation:function(){return e(function(e){fetch("http://ip-api.com/json").then(function(e){return e.json()}).then(function(t){e({type:"GEOLOCATION",geolocation:t,searchValue:t})}).catch(function(e){console.log(e)})})},getCities:function(t){return e(function(e){return function(t){fetch("https://geocode-maps.yandex.ru/1.x/?apikey=256272e7-641a-4b6f-b591-57f67ef723a3&geocode="+e+"&kind=locality&lang=en_US&format=json").then(function(e){return e.json()}).then(function(e){t({type:"CITIES_SEARCH",searchCity:e.response})}).catch(function(e){console.log(e)})}}(t))},getWeatherNow:function(t,a,n){return e(function(e,t,a){return function(a){fetch("https://api.openweathermap.org/data/2.5/weather?q="+e+","+t+"&units=metric&&lang=en&mode=json&APPID=6c32be7c80652742598856ff94eefdc9").then(function(e){return e.json()}).then(function(e){a({type:"LIST_WEATHER",listWeather:e})}).catch(function(e){console.log(e)})}}(t,a))},getCitiesNull:function(){return e({type:"CITIES_NULL"})},getWeatherForecast:function(t,a){return e(function(e,t){return function(a){fetch("https://api.openweathermap.org/data/2.5/forecast/?q="+e+","+t+"&units=metric&&lang=en&mode=json&APPID=6c32be7c80652742598856ff94eefdc9").then(function(e){return e.json()}).then(function(e){a({type:"LIST_FORECAST",listForecast:e})}).catch(function(e){console.log(e)})}}(t,a))}}})(y),b=function(){return r.a.createElement("header",null,r.a.createElement("h1",{className:w.a.header__logo},"Weather"),r.a.createElement(v,null))},E=a(1),k=a.n(E),N=a(4),x=a.n(N),O=a(2),j=a.n(O),C=Object(p.b)(function(e){return{listForecast:e.reducer.listForecast}})(function(e){var t=e.listForecast,a=function(){var e=function(e){switch(e){case 0:return{background:"#a8cfc2"};case 1:return{background:"#7da8ab"};case 2:return{background:"#4f6c7c"};case 3:return{background:"#2c4357"};case 4:return{background:"#203140"}}},a=function(e){switch(e){case 0:return{boxShadow:"0 5px 0 #99bcb1",background:"#bbe6d8"};case 1:return{boxShadow:"0 5px 0 #72999c",background:"#8ebfc2"};case 2:return{boxShadow:"0 5px 0 #486271",background:"#5e8093"};case 3:return{boxShadow:"0 5px 0 #283d4f",background:"#38556e"};case 4:return{boxShadow:"#1d2d3a",background:"#2c4357"}}},n=function(e){var t=e.clouds.all;switch(!0){case t>0&&t<30:return"sun";case t>30&&t<60:return"partially\u0421loudy";case t>60:default:return"cloud"}};if(""!==t&&t.listForecast.list){var o=function(e,t){return new Intl.DateTimeFormat("en-US",t).format(e)};return t.listForecast.list.filter(function(e,t,a){if("15:00:00"===e.dt_txt.substring(11)&&e.dt_txt.substring(8,10)!==o(new Date,{day:"numeric"}))return e}).map(function(t,c){return r.a.createElement("div",{className:j.a.weather,key:t.dt,style:e(c)},r.a.createElement("div",{className:j.a["day-week"],style:a(c)},o(new Date(t.dt_txt),{weekday:"short"})),r.a.createElement("div",{className:j.a.temperature},t.main.temp.toFixed(1),"\u2103",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:j.a["weather-svg"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#").concat(n(t)),fill:"#e4ffdd"}))),r.a.createElement("div",{className:j.a["weather-container"]},r.a.createElement("div",{className:j.a["weather-wind"]},t.wind.speed," m/s",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:j.a["weather-svg---wind"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#wind"),fill:"#e4ffdd"}))),r.a.createElement("div",{className:j.a["weather-humidity"]},t.main.humidity," %",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:j.a["weather-svg---humidity"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#humidity"),fill:"#e4ffdd"})))))})}return r.a.createElement("div",{className:j.a.loader})},n=a()?a():null;return r.a.createElement("div",{className:j.a.forecast},n)}),S=Object(p.b)(function(e){return{listWeather:e.reducer.listWeather,listForecast:e.reducer.listForecast}})(function(e){var t=e.listWeather,a=(e.listForecast,function(e){switch(e){case"dayWeek":return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(new Date);case"month":return new Intl.DateTimeFormat("en-US",{month:"short"}).format(new Date);case"day":return new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(new Date)}}),n=function(e){if(""===t||"404"===t.cod)return"city not found";switch(e){case"temp":return t.main.temp.toFixed(1);case"wind":return t.wind.speed;case"cityName":return t.name;case"humidity":return t.main.humidity}};return r.a.createElement("main",{className:k.a.main},r.a.createElement("div",{className:k.a["main__weather-now"]},r.a.createElement("div",{className:k.a["main__day-week"]},a("dayWeek")),r.a.createElement("div",{className:k.a.main__temperature},n("temp"),"\u2103",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:k.a["main__weather-now-svg"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#").concat(function(){if(""!==t&&"404"!==t.cod){var e=t.clouds.all;switch(!0){case e>0&&e<30:return"sun";case e>30&&e<60:return"partially\u0421loudy";case e>60:default:return"cloud"}}}()),fill:"#5e8093"}))),r.a.createElement("div",{className:k.a["main__weather-now-header-container"]},r.a.createElement("div",{className:k.a["main__weather-now-wind"]},"".concat(n("wind")," m/s"),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:k.a["main__weather-now-svg---wind"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#wind"),fill:"#5e8093"}))),r.a.createElement("div",{className:k.a["main__weather-now-city"]},n("cityName")),r.a.createElement("div",{className:k.a["main__weather-now-humidity"]},"".concat(n("humidity"),"%"),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:k.a["main__weather-now-svg---humidity"]},r.a.createElement("use",{xlinkHref:"".concat(x.a,"#humidity"),fill:"#5e8093"}))),r.a.createElement("div",{className:k.a["main__weather-now-day"]},"".concat(a("month")," ").concat(a("day"))))),r.a.createElement(C,null))}),W=a(10),F=a.n(W),T=function(){return r.a.createElement("div",{className:F.a.container},r.a.createElement("div",{className:F.a.design},"designed by",r.a.createElement("a",{className:F.a.link,href:"https://www.freepik.com/free-photos-vectors/template"},"freepik.com")),r.a.createElement("div",{className:F.a.author},"developed by",r.a.createElement("a",{href:"https://github.com/dindeni",className:F.a.link},"D.Lagutin")))},I=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"body ".concat(_.a.body)},r.a.createElement(b,null),r.a.createElement(S,null),r.a.createElement("footer",{className:_.a.footer},r.a.createElement(T,null)))}}]),t}(n.Component),A=a(7),D=a(25),G=a(6),H={listWeather:"",listForecast:"",loading:!1,searchCity:"",searchValue:"",geolocation:""},L=Object(A.c)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_WEATHER":return Object(G.a)({},e,{loading:!0,listWeather:t.listWeather});case"LIST_FORECAST":return Object(G.a)({},e,{listForecast:t});case"CITIES_SEARCH":return Object(G.a)({},e,{searchCity:t.searchCity.GeoObjectCollection.featureMember});case"CITIES_NULL":return Object(G.a)({},e,{searchCity:""});case"SEARCH_VALUE":return Object(G.a)({},e,{searchValue:t.searchValue});case"GEOLOCATION":return Object(G.a)({},e,{geolocation:t.geolocation});default:return Object(G.a)({},e)}}}),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d,R=Object(A.e)(L,V(Object(A.a)(D.a))),U=r.a.createElement(p.a,{store:R},r.a.createElement(I,null));c.a.render(U,document.getElementById("root"))},5:function(e,t,a){e.exports={"header__form-search":"formSearch_header__form-search__1z2zw","header__form-input":"formSearch_header__form-input__2d4Dc","header__form-ul":"formSearch_header__form-ul__2NWRH","header__form-list":"formSearch_header__form-list__3VXAh","header__form-map":"formSearch_header__form-map__1rUfl"}}},[[26,2,1]]]);
//# sourceMappingURL=main.5e23b26a.chunk.js.map