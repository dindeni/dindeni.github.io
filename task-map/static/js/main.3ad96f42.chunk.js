(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),i=a.n(r),c=a(3),s=a(4),l=a(6),u=a(5),d=a(7),f=a(1),m=a(2),p=a.n(m),g=function(e){var t=function(t){var a,n,o=e.coords;o.forEach(function(r,i){(a=window.initMap.geoObjects.add(new window.ymaps.Placemark(r,{balloonContentBody:"<div>"+e.formValue[i]+"</div>"},{draggable:!0}))).events.add("dragstart",function(e){n=e.get("target").geometry.getCoordinates()}),a.events.add("dragend",function(e){var a=e.get("target").geometry.getCoordinates(),r=o.findIndex(function(e){return e===n});o.splice(r,1,a),t.geometry.setCoordinates(Object(f.a)(o))})})};return Object(n.useEffect)(function(){if(0!==e.coords.length)if(window.initMap){window.initMap.setCenter(e.coords[e.coords.length-1]),window.initMap.geoObjects.removeAll();var a=new window.ymaps.GeoObject({geometry:{type:"LineString",coordinates:Object(f.a)(e.coords)},properties:{}},{hasBalloon:!0});window.initMap.geoObjects.add(a),t(a)}else window.ymaps.ready(function(){window.initMap=new window.ymaps.Map("map",{center:e.coords[e.coords.length-1],zoom:10,controls:["geolocationControl"]});var a=new window.ymaps.GeoObject({geometry:{type:"LineString",coordinates:Object(f.a)(e.coords)},properties:{}},{hasBalloon:!0});window.initMap.geoObjects.add(a),t(a)})},[e.coords]),o.a.createElement("div",{id:"map",style:{width:"50%",height:"600px",margin:"auto"}})},h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={formValue:[],inputValue:[],coords:[]},a.getFormValue=function(e){e.preventDefault(),a.setState(function(e){return{formValue:[].concat(Object(f.a)(e.formValue),Object(f.a)(a.state.inputValue))}})},a.getInputValue=function(e){a.setState({inputValue:[e.target.value]})},a.onDragStart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),a.formValueStart=e.target.value},a.onDragEnter=function(e,t){a.enter=t},a.onDragEnd=function(){var e=a.state.formValue.filter(function(e,t){if(t!==a.formValueStart)return e});e.splice(a.enter,0,a.state.formValue[a.formValueStart]),a.setState({formValue:e});var t=a.state.coords.filter(function(e,t){if(t!==a.formValueStart)return e});t.splice(a.enter,0,a.state.coords[a.formValueStart]),a.setState({coords:t})},a.DeleteItem=function(e){var t=a.state.formValue.filter(function(t,n){if(t!==e.target.value)return t;a.indexDeletedValue=n;var o=a.state.coords.filter(function(e,n){if(n!==a.indexDeletedValue)return t});a.setState({coords:Object(f.a)(o)})});a.setState({formValue:t})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"getCoordinates",value:function(e){return fetch("https://geocode-maps.yandex.ru/1.x/?apikey=d659a4d9-8abd-480f-a0e6-551e9f5438c0&geocode="+e+"&kind=locality&lang=en_US&format=json").then(function(e){return e.json()}).then(function(e){return e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos}).catch(function(e){console.log(e)})}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.formValue.length<this.state.formValue.length&&this.getCoordinates(this.state.formValue[this.state.formValue.length-1]).then(function(e){return a.setState({coords:[].concat(Object(f.a)(a.state.coords),[[e.slice(9),e.slice(0,9)]])})})}},{key:"render",value:function(){var e,t=this;return this.state.formValue&&(e=this.state.formValue.map(function(e,a){return o.a.createElement("li",{key:a,value:e,className:p.a.taskElement,draggable:!0,onDragStart:function(a){return t.onDragStart(a,e)},onDragEnter:function(e){return t.onDragEnter(e,a)},onDragEnd:function(e){return t.onDragEnd(e,a)}},e,o.a.createElement("button",{className:p.a.buttonDelete,value:e,onClick:t.DeleteItem}))})),o.a.createElement("article",{className:p.a.article},o.a.createElement("section",null,o.a.createElement("form",{onSubmit:this.getFormValue},o.a.createElement("input",{type:"text",name:"input-task",className:p.a.input,onChange:this.getInputValue,placeholder:"add point"})),o.a.createElement("ul",{className:p.a.taskElementContainer},e)),o.a.createElement(g,{formValue:this.state.formValue,coords:this.state.coords}))}}]),t}(n.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(h,null))}}]),t}(n.Component);i.a.render(o.a.createElement(b,null),document.getElementById("root"))},2:function(e,t,a){e.exports={taskElement:"task_taskElement__3aiVA",taskElementContainer:"task_taskElementContainer__3I7uC",buttonDelete:"task_buttonDelete__1BBTl",input:"task_input__2-jYo",article:"task_article__1Psqh"}}},[[10,1,2]]]);
//# sourceMappingURL=main.3ad96f42.chunk.js.map